<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="area" style="border: 1px solid #000; width: 1000px; height: 600px;">
        <img id="fantasma" style="position: relative" />
        <!-- <div id="fantasma" style="position: relative">◯</div> -->
    </div>
    <script>


        // que CSS tengo que modificar para que 'fantasma' se muestre a 100px desde la izquierda?
        // -> position: relative y left: 100px

        // ejercicio de contar de 1 a 10 y parar en 10.

        // combinando los dos ejercicios anteriores: mover 'fantasma' de izquierda a derecha.
        // el ejercicio anterior sólo me da números: pero la propiedad 'left' es Npx...
        // -> concatenás x + "px": el resultado sería "1px", "2px", "3px", etc

        // cómo hago para que la fantasma vaya de derecha a izquierda?
        // -> en vez de sumar, tengo que restar: contar desde 10 hasta 1

        // ahora que puedo mover de izq>der y der>izq; cómo hago para saber si tengo que sumar o restar?
        // -> creo una nueva variable para definir qué cuenta hacer y hasta cuando.

        // ya tengo la fantasma rebotando horizontalmente: cómo haría para hacer lo mismo horizontalmente?
        // -> replico lo que hice con el eje X, para un eje Y;
        // -> la propiedad CSS que tengo que modificar es 'top'

        // cómo hago para que se mueva más rápido??
        // -> puedo bajar los ms del timeout: hasta 1
        // cómo hago para que vaya más rapido!?!
        // -> en lugar de avanzar de a 1 pixel, avanzo de a varios por vez.


        ///---------------------------------------------------------------------------------------------------------
        /// 1. declaro las variables y objetos que voy a usar
        const fantasma = {
            
            // propiedades del fantasma
            x: 0,
            y: 0,
            elemento: undefined,
            direccion_x: 0, //0 de izquierda a derecha; 1 de derecha a izquierda
            direccion_y: 0, //0 de arriba hacia abajo; 1 de abajo hacia arriba

            _imagen_anterior: "",

            //funciones del fantasma
            render: ()=>{

                //para que mire hacia donde avanza, elijo la imagen en función de la dirección
                imagen = "img/ghost_" + fantasma.direccion_y + "_" + fantasma.direccion_x + ".gif";
                if(fantasma._imagen_anterior != imagen){ //sólo cambio la imagen cuando es diferente a la anterior
                    fantasma._imagen_anterior = imagen;
                    fantasma.elemento.src = imagen;
                }

                //ubico al fantasma 
                fantasma.elemento.style.left = fantasma.x + "px"
                fantasma.elemento.style.top = fantasma.y + "px"

            },

        };

        const canvas = {
            ancho: 1000,
            alto: 600,
        };

        function actualizar(){
            
            // defino el siguiente X

            fantasma.direccion_x == 0 ?  fantasma.x++ : fantasma.x-- ;
            fantasma.direccion_y == 0 ? fantasma.y++ : fantasma.y--;

            if (fantasma.x > canvas.ancho - fantasma.elemento.width) {
                    fantasma.direccion_x = 1;
            }
            if (fantasma.x < 1) {
                fantasma.direccion_x = 0; //cambio de dirección
            }
            if (fantasma.y > canvas.alto - fantasma.elemento.height) {
                    fantasma.direccion_y = 1;
            }
            if (fantasma.y < 1) {
                fantasma.direccion_y = 0;
            }

            // le pido al fantasma que se dibuje
            fantasma.render();

            // me agendo llamar a acutalizar
            setTimeout(actualizar, 10);
        }


        ///---------------------------------------------------------------------------------------------------------
        /// 2. inicializo (por única vez, al cargar la página)

        // asigno el elemento html (IMG) que va a mostrar el fantasma 
        fantasma.elemento = document.getElementById("fantasma");

        // llamo actualizar la primera vez
        actualizar();

    </script>

</body>
</html>